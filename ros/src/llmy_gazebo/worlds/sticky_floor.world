<?xml version="1.0" ?>
<sdf version="1.8">
  <world name="sticky_floor">

    <!-- ===== Physics: simplified settings using mostly defaults ===== -->
    <physics name="ode_stable" type="ode" default="true">
      <max_step_size>0.001</max_step_size>
      <real_time_update_rate>1000</real_time_update_rate>
      <ode>
        <solver>
          <type>quick</type>
          <iters>50</iters>  <!-- Using default instead of 150 for better performance -->
        </solver>
        <constraints>
          <contact_max_correcting_vel>10.0</contact_max_correcting_vel>  <!-- Prevent explosive contacts -->
          <!-- Using Gazebo defaults for: sor (1.3), cfm (0), erp (0.2), contact_surface_layer (0.001) -->
        </constraints>
      </ode>
    </physics>

    <gravity>0 0 -9.81</gravity>

    <!-- ===== Required Gazebo system plugins ===== -->
    <plugin filename="gz-sim-physics-system" name="gz::sim::systems::Physics"/>
    <plugin filename="gz-sim-user-commands-system" name="gz::sim::systems::UserCommands"/>
    <plugin filename="gz-sim-scene-broadcaster-system" name="gz::sim::systems::SceneBroadcaster"/>
    <plugin filename="gz-sim-sensors-system" name="gz::sim::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
    <plugin filename="gz-sim-imu-system" name="gz::sim::systems::Imu"/>

    <!-- ===== Lighting ===== -->
    <scene>
      <ambient>0.6 0.6 0.6 1</ambient>
      <shadows>true</shadows>
    </scene>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Sun</uri>
    </include>

    <!-- ===== Floor ===== -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Ground Plane</uri>
      <pose>0 0 0 0 0 0</pose>
    </include>

    <!-- ===== APARTMENT WALLS (15m x 12m) ===== -->
    <!-- Outer walls -->
    <model name="wall_north">
      <static>true</static>
      <pose>0 6 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>15 0.15 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>15 0.15 2.5</size></box></geometry>
          <material><ambient>0.9 0.9 0.85 1</ambient></material></visual>
      </link>
    </model>

    <model name="wall_south">
      <static>true</static>
      <pose>0 -6 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>15 0.15 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>15 0.15 2.5</size></box></geometry>
          <material><ambient>0.9 0.9 0.85 1</ambient></material></visual>
      </link>
    </model>

    <model name="wall_east">
      <static>true</static>
      <pose>7.5 0 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>0.15 12 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>0.15 12 2.5</size></box></geometry>
          <material><ambient>0.9 0.9 0.85 1</ambient></material></visual>
      </link>
    </model>

    <model name="wall_west">
      <static>true</static>
      <pose>-7.5 0 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>0.15 12 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>0.15 12 2.5</size></box></geometry>
          <material><ambient>0.9 0.9 0.85 1</ambient></material></visual>
      </link>
    </model>

    <!-- Interior walls - create rooms -->
    <!-- Living/Kitchen divider (partial wall) -->
    <model name="wall_kitchen">
      <static>true</static>
      <pose>-2 2 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>0.15 4 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>0.15 4 2.5</size></box></geometry>
          <material><ambient>0.85 0.85 0.8 1</ambient></material></visual>
      </link>
    </model>

    <!-- Bedroom wall -->
    <model name="wall_bedroom">
      <static>true</static>
      <pose>3 -2 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>9 0.15 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>9 0.15 2.5</size></box></geometry>
          <material><ambient>0.85 0.85 0.8 1</ambient></material></visual>
      </link>
    </model>

    <!-- Bathroom wall -->
    <model name="wall_bathroom">
      <static>true</static>
      <pose>5 -4 1.25 0 0 0</pose>
      <link name="link">
        <collision name="collision"><geometry><box><size>0.15 4 2.5</size></box></geometry></collision>
        <visual name="visual"><geometry><box><size>0.15 4 2.5</size></box></geometry>
          <material><ambient>0.85 0.85 0.8 1</ambient></material></visual>
      </link>
    </model>

    <!-- ===== LIVING ROOM (center-right) ===== -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Sofa</uri>
      <pose>4 3 0 0 0 -1.57</pose>
    </include>

<!--
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Coffee Table</uri>
      <pose>2.5 3 0 0 0 0</pose>
    </include>
-->

<!--
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Television</uri>
      <pose>0 3 0.5 0 0 1.57</pose>
    </include>
-->

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Bookshelf</uri>
      <pose>6.5 5 0 0 0 3.14</pose>
    </include>

<!--
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Floor Lamp</uri>
      <pose>6 1 0 0 0 0</pose>
    </include>
    -->

    <!-- ===== KITCHEN (left side) ===== -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Table</uri>
      <pose>-5 3 0 0 0 0</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Office Chair</uri>
      <pose>-5.5 2 0 0 0 0.5</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Office Chair</uri>
      <name>chair_2</name>
      <pose>-4.5 4 0 0 0 -2</pose>
    </include>

    <!-- Kitchen counter (using shelf) -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Bookshelf</uri>
      <name>kitchen_counter</name>
      <pose>-6.5 1 0 0 0 1.57</pose>
    </include>

    <!-- ===== BEDROOM (bottom right) ===== -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Bed</uri>
      <pose>5 -4 0 0 0 0</pose>
    </include>

  <!--
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Wardrobe</uri>
      <pose>6.5 -3 0 0 0 -1.57</pose>
    </include>
    -->

    <!-- ===== HALLWAY / CLUTTER ===== -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Cardboard Box</uri>
      <pose>-1 -1 0.15 0 0 0.3</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Cardboard Box</uri>
      <name>box_2</name>
      <pose>-1.3 -1.2 0.45 0 0 0.8</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Cardboard Box</uri>
      <name>box_3</name>
      <pose>1.15 0 0.8 0 0 0.1</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Construction Cone</uri>
      <pose>-3 -3 0 0 0 0</pose>
    </include>

<!-- 
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Construction Barrel</uri>
      <pose>-4 -4 0 0 0 0</pose>
    </include>
-->

    <!-- Rescue Randy in living room -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Rescue Randy</uri>
      <pose>1 2 0 0 0 1.57</pose>
    </include>

    <!-- Trash scattered -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Coke Can</uri>
      <pose>2 2.5 0.4 0.1 0 0</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Coke Can</uri>
      <name>can_2</name>
      <pose>-5.2 3.5 0.8 0 0 0.5</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Coke Can</uri>
      <name>can_3</name>
      <pose>0.2 -0.5 0.04 1.57 0 0</pose>
    </include>

    <!-- ===== MISC OBSTACLES ===== -->
    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Jersey Barrier</uri>
      <pose>-6 -2 0 0 0 0</pose>
    </include>

    <include>
      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Dumpster</uri>
      <pose>-6 -5 0 0 0 0</pose>
    </include>

  </world>
</sdf>