<?xml version="1.0" ?>
<robot name="LLMy" xmlns:xacro="http://www.ros.org/wiki/xacro" xmlns:gz="http://gazebosim.org/schema">

<xacro:property name="body_color" value="Gazebo/DarkGrey" />

<!-- ros2_control plugin for Gazebo -->
<gazebo>
  <plugin filename="gz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
    <parameters>$(find llmy_control)/config/controllers.sim.yaml</parameters>
  </plugin>
</gazebo>

<!-- Base link -->
<gazebo reference="base_link">
  <material>${body_color}</material>
  <mu1>0.2</mu1>
  <mu2>0.2</mu2>
  <self_collide>false</self_collide>
  <gravity>true</gravity>
</gazebo>

<!-- Wheel friction for skid-steer drive -->
<gazebo reference="FR_wheel_1">
  <material>Gazebo/Black</material>
  <mu1>1.2</mu1>
  <mu2>1.2</mu2>
  <self_collide>false</self_collide>
  <kp>100000.0</kp>
  <kd>1000.0</kd>
</gazebo>

<gazebo reference="BR_wheel_1">
  <material>Gazebo/Black</material>
  <mu1>1.2</mu1>
  <mu2>1.2</mu2>
  <self_collide>false</self_collide>
  <kp>100000.0</kp>
  <kd>1000.0</kd>
</gazebo>

<gazebo reference="FL_wheel_1">
  <material>Gazebo/Black</material>
  <mu1>1.2</mu1>
  <mu2>1.2</mu2>
  <self_collide>false</self_collide>
  <kp>100000.0</kp>
  <kd>1000.0</kd>
</gazebo>

<gazebo reference="BL_wheel_1">
  <material>Gazebo/Black</material>
  <mu1>1.2</mu1>
  <mu2>1.2</mu2>
  <self_collide>false</self_collide>
  <kp>100000.0</kp>
  <kd>1000.0</kd>
</gazebo>

<!-- Motors -->
<gazebo reference="FR_motor_1">
  <material>Gazebo/White</material>
  <mu1>0.2</mu1>
  <mu2>0.2</mu2>
  <self_collide>false</self_collide>
</gazebo>

<gazebo reference="BR_motor_1">
  <material>Gazebo/White</material>
  <mu1>0.2</mu1>
  <mu2>0.2</mu2>
  <self_collide>false</self_collide>
</gazebo>

<gazebo reference="FL_motor_1">
  <material>Gazebo/White</material>
  <mu1>0.2</mu1>
  <mu2>0.2</mu2>
  <self_collide>false</self_collide>
</gazebo>

<gazebo reference="BL_motor_1">
  <material>Gazebo/White</material>
  <mu1>0.2</mu1>
  <mu2>0.2</mu2>
  <self_collide>false</self_collide>
</gazebo>

<!-- Arm components -->
<gazebo reference="arm_base_rotation_link_1">
  <material>${body_color}</material>
  <mu1>0.2</mu1>
  <mu2>0.2</mu2>
  <self_collide>false</self_collide>
</gazebo>

<!-- Sensors -->
<gazebo reference="lidar_1">
  <material>Gazebo/Blue</material>
</gazebo>

<gazebo reference="head_camera_1">
  <material>Gazebo/Blue</material>
</gazebo>

<gazebo reference="wrist_camera_v1_1">
  <material>Gazebo/Blue</material>
</gazebo>

<!-- Head RGB Camera -->
<gazebo reference="head_camera_1">
  <sensor type="camera" name="head_rgb_camera">
    <update_rate>30</update_rate>
    <topic>head_camera/rgb</topic>
    <gz_frame_id>head_camera_1</gz_frame_id>
    <pose>0 0 0 0 0 0</pose>
    <camera name="head_rgb">
      <horizontal_fov>1.0472</horizontal_fov>
      <image>
        <width>640</width>
        <height>480</height>
        <format>R8G8B8</format>
      </image>
      <clip>
        <near>0.05</near>
        <far>20.0</far>
      </clip>
    </camera>
  </sensor>
</gazebo>

<!-- Head Depth Camera -->
<gazebo reference="head_camera_1">
  <sensor type="depth_camera" name="head_rgbd_camera">
    <update_rate>30</update_rate>
    <topic>head_camera/depth</topic>
    <gz_frame_id>head_camera_1</gz_frame_id>
    <pose>0 0 0 0 0 0</pose>
    <camera name="head_rgbd">
      <horizontal_fov>1.0472</horizontal_fov>
      <image>
        <width>640</width>
        <height>480</height>
        <format>R8G8B8</format>
      </image>
      <clip>
        <near>0.05</near>
        <far>10.0</far>
      </clip>
    </camera>
  </sensor>
</gazebo>

<!-- Wrist RGB Camera -->
<gazebo reference="wrist_camera_v1_1">
  <sensor type="camera" name="wrist_rgb_camera">
    <update_rate>30</update_rate>
    <topic>wrist_camera/rgb</topic>
    <gz_frame_id>wrist_camera_v1_1</gz_frame_id>
    <pose>0 0 0 3.14159 0 0</pose>
    <camera name="wrist_rgb">
      <horizontal_fov>1.0472</horizontal_fov>
      <image>
        <width>640</width>
        <height>480</height>
        <format>R8G8B8</format>
      </image>
      <clip>
        <near>0.05</near>
        <far>20.0</far>
      </clip>
    </camera>
  </sensor>
</gazebo>

<!-- IMU Sensor -->
<gazebo reference="imu_support_1">
  <sensor type="imu" name="imu">
    <always_on>true</always_on>
    <update_rate>200</update_rate>
    <topic>sensors/imu</topic>
    <gz_frame_id>imu_support_1</gz_frame_id>
    <pose>0 0 0 0 0 0</pose>
    <imu>
      <noise>
        <type>gaussian</type>
        <rate>
          <mean>0.0</mean>
          <stddev>0.02</stddev>
          <bias_mean>0.0001</bias_mean>
          <bias_stddev>0.0001</bias_stddev>
        </rate>
        <accel>
          <mean>0.0</mean>
          <stddev>0.1</stddev>
          <bias_mean>0.01</bias_mean>
          <bias_stddev>0.01</bias_stddev>
        </accel>
      </noise>
    </imu>
  </sensor>
</gazebo>

<!-- Lidar Sensor -->
<gazebo reference="lidar_1">
  <sensor name="lidar" type="gpu_lidar">
    <always_on>true</always_on>
    <visualize>true</visualize>
    <update_rate>30</update_rate>
    <topic>scan</topic>
    <gz_frame_id>lidar_1</gz_frame_id>
    <pose>0 0 0.02 0 0 3.14159265359</pose>
    <lidar>
      <scan>
        <horizontal>
          <samples>128</samples>
          <resolution>1.000000</resolution>
          <min_angle>0</min_angle>
          <max_angle>6.28319</max_angle>
        </horizontal>
      </scan>
      <range>
        <min>0.120000</min>
        <max>10</max>
        <resolution>0.015000</resolution>
      </range>
      <noise>
        <type>gaussian</type>
        <mean>0.0</mean>
        <stddev>0.01</stddev>
      </noise>
    </lidar>
  </sensor>
</gazebo>

</robot>
