<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="LeRemix">

    <!-- ros2_control plugin for new Gazebo -->
    <gazebo>
        <plugin filename="gz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
            <parameters>$(find leremix_control)/config/controllers.sim.yaml</parameters>
        </plugin>
    </gazebo>


    <!-- Head RGB Camera -->
    <gazebo reference="head_camera_frame">
        <sensor type="camera" name="head_rgb_camera">
            <update_rate>30</update_rate>
            <topic>head_camera/rgb</topic>
            <gz_frame_id>head_camera_frame</gz_frame_id>
            <camera name="head_rgb">
                <horizontal_fov>1.0472</horizontal_fov> <!-- ~60 deg -->
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>R8G8B8</format>
                </image>
                <clip>
                    <near>0.05</near>
                    <far>20.0</far>
                </clip>
            </camera>
        </sensor>
    </gazebo>

    <!-- Head Depth Camera (RGBD) -->
    <gazebo reference="head_camera_frame">
        <sensor type="depth_camera" name="head_rgbd_camera">
            <update_rate>30</update_rate>
            <topic>head_camera/depth</topic>
            <gz_frame_id>head_camera_frame</gz_frame_id>
            <camera name="head_rgbd">
                <horizontal_fov>1.0472</horizontal_fov>
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>R8G8B8</format>
                </image>
                <clip>
                    <near>0.05</near>
                    <far>10.0</far>
                </clip>
            </camera>
        </sensor>
    </gazebo>

    <!-- Wrist RGB Camera -->
    <gazebo reference="wrist_camera_frame">
        <sensor type="camera" name="wrist_rgb_camera">
            <update_rate>30</update_rate>
            <topic>wrist_camera/rgb</topic>
            <gz_frame_id>wrist_camera_frame</gz_frame_id>
            <camera name="wrist_rgb">
                <horizontal_fov>1.0472</horizontal_fov> <!-- ~60 deg -->
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>R8G8B8</format>
                </image>
                <clip>
                    <near>0.05</near>
                    <far>20.0</far>
                </clip>
            </camera>
        </sensor>
    </gazebo>

    <!-- IMU Sensor -->
    <gazebo reference="imu_1">
        <sensor type="imu" name="imu">
            <always_on>true</always_on>
            <update_rate>200</update_rate>
            <topic>sensors/imu</topic>
            <gz_frame_id>imu_1</gz_frame_id>
            <imu>
                <noise>
                    <type>gaussian</type>
                    <rate>
                        <mean>0.0</mean>
                        <stddev>0.02</stddev>
                        <bias_mean>0.0001</bias_mean>
                        <bias_stddev>0.0001</bias_stddev>
                    </rate>
                    <accel>
                        <mean>0.0</mean>
                        <stddev>0.1</stddev>
                        <bias_mean>0.01</bias_mean>
                        <bias_stddev>0.01</bias_stddev>
                    </accel>
                </noise>
            </imu>
        </sensor>
    </gazebo>

    <!-- Lidar Sensor -->
    <gazebo reference="lidar_frame">
        <sensor name="lidar" type="gpu_lidar">
            <always_on>true</always_on>
            <visualize>true</visualize>
            <update_rate>30</update_rate>
            <topic>scan</topic>
            <gz_frame_id>lidar_frame</gz_frame_id>
            <lidar>
                <scan>
                    <horizontal>
                        <samples>128</samples>
                        <resolution>1.000000</resolution>
                        <min_angle>0</min_angle>
                        <max_angle>6.28319</max_angle>
                    </horizontal>
                </scan>
                <range>
                    <min>0.120000</min>
                    <max>10</max>
                    <resolution>0.015000</resolution>
                </range>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.01</stddev>
                </noise>
            </lidar>
        </sensor>
    </gazebo>

</robot>
