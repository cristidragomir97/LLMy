# Controllers (your original settings), kept separate from the ros2_control hardware config.
controller_manager:
  ros__parameters:
    update_rate: 50  # Hz
    use_sim_time: false

    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    omnidirectional_controller:
      type: omni_wheel_drive_controller/OmniWheelDriveController

    arm_controller:
      type: position_controllers/JointGroupPositionController

    head_controller:
      type: position_controllers/JointGroupPositionController

arm_controller:
  ros__parameters:
    joints: ["1","2","3","4","5","6"]

    command_interfaces:
      - position

    state_interfaces:
      - position

    open_loop_control: true

head_controller:
  ros__parameters:
    joints: ["camera_pan", "camera_tilt"]

    command_interfaces:
      - position

    state_interfaces:
      - position

    open_loop_control: true

omnidirectional_controller:
  ros__parameters:
    # Required parameters
    wheel_offset: 2.094395  # 120 degrees (30° + 90° correction) - position of wheel3 from +X axis
    wheel_names:
     - wheel3_rotation  # MUST match hardware interface order in LeRemix.hardware.xacro
     - wheel1_rotation
     - wheel2_rotation
    robot_radius: 0.10537  # Distance from robot center to wheels
    wheel_radius: 0.05   # Wheel size

    # Optional parameters
    tf_frame_prefix_enable: true
    tf_frame_prefix: ""
    odom_frame_id: odom
    base_frame_id: base_link
    update_rate: 50  # Match controller_manager rate

    # Covariance (note: different structure from omnidirectional_controllers)
    diagonal_covariance:
      pose: [0.001, 0.001, 0.001, 0.001, 0.001, 0.01]
      twist: [0.001, 0.001, 0.001, 0.001, 0.001, 0.01]

    open_loop: true  # Use open-loop velocity control for smoother motion
    position_feedback: false  # Don't use position feedback in velocity mode
    enable_odom_tf: true
    cmd_vel_timeout: 0.5

    # Note: The following parameters from omnidirectional_controllers are not supported:
    # - use_stamped_vel (omni_wheel_drive_controller uses stamped by default)
    # - linear_velocity_scale / angular_velocity_scale (not available)
    # - odom_numeric_integration_method (not available)
    # - publish_rate (handled internally)       
